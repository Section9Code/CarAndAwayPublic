swagger: '2.0'
info:
  version: 0.9.2
  title: Rentalcars.com Generic Supplier Integration Module
  description: Rentalcars.com supplier integration module is our generic specification for quickly integrating third party supplier reservation systems with Rentalcars.com
host: test.com
schemes:
  - http
  - https
securityDefinitions:
  JWT:
    type: apiKey
    description: |-
      JSON Web Token (JWT) is an open standard (RFC 7519).

       A valid JWT token must be passed in all requests (apart from /login) in the 'Authorization' header. A valid JWT token is generated by the API and returned by the route /login.

       The following syntax must be used in the 'Authorization' header :

       Bearer: {JWT-token-string}
    name: Authorization
    in: header
basePath: /v1
produces:
  - application/json
paths:
  /login:
    post:
      summary: Allow users to login and receive a JWT
      consumes:
        - application/json
      parameters:
        - name: login
          in: body
          required: true
          schema:
            $ref: '#/definitions/login'
      tags:
        - login
      responses:
        '200':
          description: Response if ok
          schema:
            $ref: '#/definitions/token'
        '400':
          description: 'error response, possible reasons in error response, e.g. user not found'
          schema:
            $ref: '#/definitions/error'
        '403':
          description: Login attempt failed
        '500':
          description: error response
          schema:
            $ref: '#/definitions/error'
  /search:
    get:
      security:
        - JWT: []
      parameters:
        - name: requestId
          in: query
          description: Unique requestId that should be returned in the response.
          required: true
          allowEmptyValue: false
          type: string
        - name: pickUpDate
          in: query
          description: 'Pick up date in locations local time, format "yyyy-mm-ddThh:mm:ss"'
          required: true
          allowEmptyValue: false
          type: string
          format: date-time
        - name: dropOffDate
          in: query
          description: 'Drop off date in locations local time, format "yyyy-mm-ddThh:mm:ss"'
          required: true
          allowEmptyValue: false
          type: string
          format: date-time
        - name: pickUpLat
          in: query
          description: Suppliers pick up latitude
          allowEmptyValue: false
          type: number
        - name: pickUpLon
          in: query
          description: Suppliers pick up longitude
          allowEmptyValue: false
          type: number
        - name: pickUpRadius
          in: query
          description: Radius (km) of the search for lat/lon searches
          allowEmptyValue: false
          type: number
        - name: maxVehicles
          in: query
          description: Maximum number of vehicles to be returned
          type: integer
        - name: driverAge
          in: query
          description: Drivers age. Should be passed for young/old drivers to get appropriate vehicles
          type: integer
        - name: supplierCode
          in: query
          type: string
          description: 'Optional, allows search for a specific supplier referenced by this code where the  endpoint/service supports multiple suppliers'
        - name: supplierReservationReference
          in: query
          description: 'Suppliers reservation reference, used if doing a search against a current reservation'
          type: string
        - name: accountNumber
          in: query
          type: string
        - name: rateCode
          in: query
          type: string
        - name: discountNumber
          in: query
          type: string
        - name: rateReference
          in: query
          type: string
      tags:
        - search
      responses:
        '200':
          description: Rates and availability response
          schema:
            $ref: '#/definitions/searchRS'
        '400':
          description: Bad search request. Optional response object could contain more details on the error
          schema:
            $ref: '#/definitions/error'
        '401':
          description: Missing or invalid JWT authentication token
        '403':
          description: Forbidden (possible user permissions problem)
        '500':
          description: error response
          schema:
            $ref: '#/definitions/error'
definitions:
  searchRS:
    type: object
    properties:
      coreInfo:
        $ref: '#/definitions/coreInfo'
      rate:
        $ref: '#/definitions/rate'
      vehicles:
        type: array
        items:
          $ref: '#/definitions/vehicleFromSearch'
    required:
      - vehicles
  currency:
    type: string
    maxLength: 3
    description: ISO Currency code
  charge:
    type: object
    properties:
      amount:
        type: number
        format: float
      currency:
        $ref: '#/definitions/currency'
      taxInclusive:
        type: boolean
      taxRate:
        type: number
        format: float
        minimum: 0
        maximum: 100
        description: Tax rate percentage value
    required:
      - taxInclusive
      - taxRate
      - amount
      - currency
  additionalCharge:
    type: object
    properties:
      amount:
        type: number
        format: float
      currency:
        $ref: '#/definitions/currency'
      taxInclusive:
        type: boolean
      taxRate:
        type: number
        format: float
        minimum: 0
        maximum: 100
        description: Tax rate percentage value
      includedInRate:
        type: boolean
    required:
      - taxInclusive
      - taxRate
      - amount
      - currency
  coreInfo:
    type: object
    properties:
      requestId:
        type: string
        description: The requestId passed in the request.
      pickUpDate:
        description: 'Pickup date-time in locations timezone. e.g. 2016-01-01T12:00:00'
        type: string
        format: date-time
      dropOffDate:
        description: 'Dropoff date-time in locations timezone. e.g. 2016-01-05T12:00:00'
        type: string
        format: date-time
      pickUpLat:
        description: Suppliers pick up latitude
        type: number
      pickUpLon:
        description: Suppliers pick up longitude
        type: number
      pickUpRadius:
        description: Radius (km) of the search for lat/lon searches
        type: number
      maxVehicles:
        description: Maximum number of vehicles to be returned
        type: integer
    required:
      - pickUpDate
      - dropOffDate
  rate:
    type: object
    properties:
      accountNumber:
        type: string
      rateCode:
        type: string
      discountNumber:
        type: string
      rateReference:
        type: string
  features:
    type: object
    properties:
      feature:
        description: Rental Features Id e.g 1)No Pets 2)No Smoking 3)Replace Any Fuel. A list will be in the documentation
        type: number
  distance:
    type: object
    properties:
      distance:
        description: Distance from search location
        type: number
      unitType:
        type: string
        enum:
          - miles
          - kilometers
        description: Unit name e.g Miles Or Kilometers
    required:
      - distance
      - unitType
  images:
    type: object
    properties:
      small:
        type: array
        items:
          type: string
        description: URL for small images of the vehicle (150x100)
      medium:
        type: array
        items:
          type: string
        description: URL for medium images of the vehicle (400x267)
      large:
        type: array
        items:
          type: string
        description: URL for large images of the vehicle (600x400)
  location:
    type: object
    properties:
      locationName:
        type: string
        description: 'Breif description of the location, e.g. Manchester inner city'
      pickUpLat:
        description: Vehicle pick up latitude
        type: number
      pickUpLon:
        description: Vehicle pick up longitude
        type: number
      distanceFromSearch:
        $ref: '#/definitions/distance'
    required:
      - pickUpLat
      - pickUpLon
  delivery:
    type: object
    properties:
      canDeliver:
        type: boolean
        description: Can the vehicle be deliverd to the customer.
      canCollect:
        type: boolean
        description: Can the vehicle be collected from the customer.
      distance:
        type: number
        description: The distance that delivery or collection is available.
      unitType:
        type: string
        enum:
          - miles
          - kilometers
        description: Unit name e.g Miles Or Kilometers
      instructions:
        type: string
        description: 'When delivery or collection is availabe, e.g Mon - Fri 9am - 5pm'
      price:
        $ref: '#/definitions/additionalCharge'
    required:
      - canDeliver
      - canCollect
      - distance
      - unitType
      - price
  ratings:
    type: object
    properties:
      overallRating:
        type: number
        description: Overall rating out of 10.
        minimum: 0
        maximum: 10
      bookings:
        type: number
        description: Number of times the vehicle has been booked.
        minimum: 0
  vehicleFromSearch:
    type: object
    properties:
      status:
        type: string
        enum:
          - available
          - onrequest
        description: Vehicle availability state
      id:
        type: string
        description: Unique vehicle id.
      class:
        type: string
        description: 'Suppliers car class code, 4-letter SIPP code. i.e. EDMR'
      make:
        type: string
        description: 'Vehicle make, e.g. Mercedes'
      model:
        type: string
        description: 'Vehicle make, e.g. C 220 Coupe'
      colour:
        type: string
        description: 'Vehicle colour, e.g. Silver'
      regYear:
        type: number
        description: 'Vehicle registration year, e.g 2014'
      numDoors:
        type: number
        description: Number of doors on the vehicle
      seats:
        type: number
        description: Number of seats on the vehicle
      fuelType:
        type: string
        description: Type of fuel used by the vehicle
      fuelPolicy:
        type: string
        description: 'Fuel policy,  e.g. full-to-full, return same, return empty'
      transmissionType:
        type: string
        description: 'Transmission type, e.g. Manual'
      aboutVehicle:
        type: string
        description: 'About the vehicle. e.g The vehicle is a one owner car. The car is very clean and economical yet prestigious. The car returns 55MPG on a motorway run, 45MPG around town.'
      location:
        $ref: '#/definitions/location'
      price:
        $ref: '#/definitions/charge'
      deliveryOptions:
        $ref: '#/definitions/delivery'
      features:
        type: array
        items:
          $ref: '#/definitions/features'
      clickThroughURL:
        type: string
        description: URL used to book the selected vehicle.
      termsAnConditionsURL:
        type: string
        description: URL used to display terms and conditions.
      images:
        $ref: '#/definitions/images'
      ratings:
        $ref: '#/definitions/ratings'
    required:
      - status
      - class
      - price
      - make
      - model
      - regYear
      - numDoors
      - seats
      - fuelPolicy
      - clickThroughURL
  login:
    type: object
    properties:
      username:
        type: string
      password:
        type: string
    required:
      - username
      - password
  token:
    type: object
    properties:
      token:
        type: string
  error:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
